+++
title = "[開箱]Akitio Node之搶救老舊MacbookPro外接顯卡大作戰(EGPU)"
date = "2017-01-28"
+++

**安迪兒手上的MacBook Pro是13吋2012年版本的老舊筆電了  
趁過新年整理一下，再次強化它，提升他的效能。**    

## 先上結論  
安迪兒手上這台2012年版13吋Macbook Pro升級後配備如下:  
1. 雙SSD做raid 0(拆掉光碟機)  
2. 16G RAM  
3. 外接nvida顯卡  
4. 新的筆電電池  

<img src="https://goo.gl/qysSjM" width="100%">
<img src="https://goo.gl/M7oWfn" width="100%">
<img src="https://goo.gl/w4e1jJ" width="100%">

**早期Macbook Pro還不錯，耐用且可以自己隨意的更換零件**   
第1、2、4項安迪兒之前就換了  
但顯卡和cpu這塊一直沒辦法有很好的方式做升級  

## **mac的痛一直是顯卡不夠力**
**謎之音：** ~~我也想用mac打電動呀~ＸＤ~~

關於外接顯卡，網路上有一些修改方式  
例如:  
* 犧牲無線網卡，拆機拉線出來接轉接卡再接顯卡  
* 找個pcie外接盒，剪線改電源，再接顯卡

但最近，EGPU、電競的流行，專門的顯卡外接盒出現在市場上      
安迪兒發現最近有一款ATIKIO Node剛推出上市   
蠻符合安迪兒的需求，內建Power 400W、Thunderbolt 3    
差不多市面上的高級顯卡都能跑   
**重點是不用改硬體線路!!!**     


於是…  
一個箱子就出現在辦公室，不小心踢到XD  
首先來開箱一下  
![](https://goo.gl/ZJWdU7)
![](https://goo.gl/x2lViC)
![](https://goo.gl/AHiaAS)
![](https://goo.gl/G0HAj1)
![](https://goo.gl/oFkAkh)  

**使用ATIKIO Node後的感想**  
**優點:**    
1. 有送一條1千多的Thunderbolt 3 的線
2. 有風扇散熱
3. 有把手方便整盒提起來

**缺點:**  
1. 比想像中大
2. 有點重
3. 有風扇免不了有聲音
4. Thunderbolt3的線...只有2016後新的mac才能用  
(加買一條3轉2的線要2千元…太坑了)  

以上開箱完畢!  
再來正式說明一下
## 如何修改MAC外接顯卡    

## 開始前…很重要!!!!  
* 顯卡的跑分資料:  
 http://www.videocardbenchmark.net/gpu_list.php  

* mac上ATIKIO Node盒子的顯卡支援程度:  
 https://en.wikipedia.org/wiki/CUDA  

* mac升級至最新的Sierra 10.12.3(相容較多的顯示卡)  

安迪兒在顯卡這邊踩到雷，用了GTX1060  
但在mac上做了很多的修改和測試    
頂多只能捉到卡，但沒辦法驅動   
後來查了很多資料看了人家的討論才知道    
在mac上外接顯卡NVIDA只支援到Maxwell和之前的架構    
新的Pascal系列，目前不支援(可以參考上面的連結列表)  

**以上在windows10有支援不用擔心**  
**mac可用bootcamp方式安裝win10**


## 1. 關掉MAC System Integrity Protection  
MAC有SIP的機制，防止我們去對系統做深層的修改。  
所以要先把 SIP 關掉。  
步驟如下  
重開機
按住command+R 進回復模式
打開終端機  
輸入

```csrutil disable ```  

![](https://goo.gl/nZKjeF)  
![](https://goo.gl/PBKZo7)  

如果指令不能用的話  
可能和安迪兒一樣磁區有點不同  
這時可以做一隻mac的安裝碟  
用安裝碟開機進終端機執行指令就可以了  

安裝碟的製做方式  
參考安迪兒以前寫的文章  
[自製Mac OS X El Capitan 10.11 USB安裝碟&修復RAID功能](https://dotblogs.com.tw/bowwowxx/2015/10/03/153487)    

## 2. 解鎖Thunderbolt 3外接顯卡  
mac上其實有限制非特定的Thunderbolt硬體不給用  
接上ATIKIO Node，看一下硬體明細  
Thunderbolt那邊, 如果有Unsupported字眼的  
表示mac不支援此硬體，要解開tb3    
原理大約是在外接kext裡加入相關驅動資料  
可以參考
> https://github.com/KhaosT/tb3-enabler

![](https://goo.gl/UIYbqg)
![](https://goo.gl/sn48ks)

捉下tb3-enabler，然後執行  
```
chmod +x tb3-enabler.py
sudo tb3-enabler.py apply
```

![](https://goo.gl/kSGd0i)

看一下狀態  
```tb3-enabler.py status```  

![](https://goo.gl/TZ4iDD)  

最後restart筆電  

## 3. 寫入mac相關硬體資訊&安裝相關的driver  
可以參考  
> https://github.com/goalque/automate-eGPU  

捉下來後

```
chmod +x automate-eGPU.sh
sudo ./automate-eGPU.sh
```

其實也可以自己去安裝相關的mac driver  
或是automate-eGPU安裝過程會詢問(都選y)    
裝完後，再按更新就可以了  

* nvidia在mac上的driver是web driver

  [QUADRO & GEFORCE MACOS DRIVER RELEASE 367.15.10.35](http://www.nvidia.com/download/driverResults.aspx/114669/en-us)  

* 順便裝一下cuda

 [CUDA](http://www.nvidia.com.tw/object/mac-driver-archive-tw.html)  

![](https://goo.gl/YaVZt4)
![](https://goo.gl/db166q)  

**裝完後系統編好設定裡會有相關選項**  

![](https://goo.gl/ZwAVrY)  

**這張是mac有捉到顯卡但沒driver的**  
![](https://goo.gl/W7j8Ot)  

**有支援的話會像這樣子**    
![](https://goo.gl/zM76M8)  
![](https://goo.gl/6dhQBc)  

## 4. 以上都完成的話就可以關機，接好外接螢幕，重開機   
順利的話，外接螢幕的畫面就會出現了  
![](https://goo.gl/OfEbVO)

## 5. 蓋上筆電單獨用外接顯卡的螢幕也ok  
![](https://goo.gl/4Uif9L)

## 6. 看一下相關的資訊  
在外接螢幕上可以看見是張外接顯卡    
![](https://goo.gl/m0NWmr)  

好像沒用到外接顯卡的效能  
![](https://goo.gl/p33ZoD)  

測試一下，跑一下4k影片看看  
嗯嗯，有用上了，應該有效  
![](https://goo.gl/pvL1OR)

## 7. 跑一下分吧  
安迪兒用了[LuxMark](http://www.luxrender.net/wiki/LuxMark#Binaries)來測試一下   
真的有差~XD  

![](https://goo.gl/5wICW7)
![](https://goo.gl/l21nzm)
![](https://goo.gl/S4VtvA)

## 8. 玩一下cs，有點順XD  

![](https://goo.gl/wkWH38)
![](https://goo.gl/AJlUj1)
![](https://goo.gl/ejrlGD)
## 2012老舊mbp再戰3年吧!!!
## 以上是安迪兒macbook pro外接顯卡的記錄
## 收工嘍!  
